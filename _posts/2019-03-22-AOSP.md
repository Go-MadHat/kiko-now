---
layout: post
title: ! 'Make_Custom_Android(AOSP)'
excerpt_separator: <!--more-->
tags:
  - Koon
  - Android
---

Android Open Source Project 인 AOSP에 대해 설명합니다.
<!--more-->

Android는 휴대용 오픈소스 운영체제이며, Google이 주도하는 오픈소스 프로젝트입니다. 

안드로이드는 현재까지 나온 9, Pie 버전까지 소스를 공개하고 있습니다. 공개된 소스를 통하여 사용자는 자신만의 안드로이드를 만들 수 있습니다.

Custom 환경 즉 Rom을 간단하게 수정 후, 빌드하는 것으로 Cusom Rom을 제작하겠습니다.

> 대부분의 Custom 환경을 만들겠다는 의미는 안드로이드의 Rom 또는 Kernel을 수정을 하는 것을 의미합니다.

# ROM

ROM은 보통 컴퓨터의 읽기 전용 메모리로 많이 언급되어집니다. 

Android에서 언급하는 ROM은 읽기 전용 메모리와 전혀 상관 없습니다. Android에서의 Rom은 안드로이드 펌웨어를 의미합니다. 펌웨어의 범위는 Kernel을 뺀 나머지 전부라고 할 수 있습니다.

Custom Rom이라는 것은 결국 안드로이드 오픈 소스를 수정하여, 사용하겠다라는 의미로 말할 수 있습니다.


# 요구 사항
AOSP 빌드를 하기 위해서는 특정 기준을 넘어야 가능합니다.

기준을 넘지 못할 시, 메모리 부족 및 공간 부족으로 빌드가 중간에 멈추게 됩니다.
> - GingerBread 이상일 시 64비트 환경 필요
> - 최소 200GB 이상의 디스크 공간(소스 다운로드용 ) + 150GB 여분의 공간(빌드 용)
> - 최소 16GB RAM



# 환경 구축

- Java 설치

```
sudo apt-get install openjdk-8-jdk
```


- 필요패키지 설치
```
sudo apt-get install git-core gnupg flex bison gperf build-essential zip curl zlib1g-dev gcc-multilib g++-multilib libc6-dev-i386 lib32ncurses5-dev x11proto-core-dev libx11-dev lib32z-dev libgl1-mesa-dev libxml2-utils xsltproc unzip
```

- 그 외 파이썬 및 git 설치


# 소스 다운로드

- Repo 설치
```
mkdir ~/bin
PATH=~/bin:$PATH
```

```
curl https://storage.googleapis.com/git-repo-downloads/repo > ~/bin/repo
chmod a+x ~/bin/repo
```

- 안드로이드 소스와 연결

AOSP 작업할 디렉토리 생성
```
mkdir WORKING_DIRECTORY
cd WORKING_DIRECTORY
```

git 설정
```
git config --global user.name "Your Name"
git config --global user.email "you@example.com"
```

android 기본에 repo 연결
```
repo init -u https://android.googlesource.com/platform/manifest
```

android branch 설정(https://source.android.com/setup/start/build-numbers.html#source-code-tags-and-builds 여기 참고하면서 해야합니다.)
```
repo init -u https://android.googlesource.com/platform/manifest -b [안드로이드 버전 및 r종류]
```

- 다운로드(시간 전나 걸림)
```
repo sync
```



# 참고 사이트

AOSP
> https://source.android.com/

build Custom Rom
> https://www.talentica.com/blogs/build-custom-android-rom-using-android-open-source-projectaosp/
